<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QHotkey: QHotkey</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QHotkey
   &#160;<span id="projectnumber">1.2.2</span>
   </div>
   <div id="projectbrief">A global shortcut/hotkey for Desktop Qt-Applications</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="class_q_hotkey.html" title="A class to define global, systemwide Hotkeys. ">QHotkey</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>A global shortcut/hotkey for Desktop Qt-Applications.</p>
<p>The <a class="el" href="class_q_hotkey.html" title="A class to define global, systemwide Hotkeys. ">QHotkey</a> is a class that can be used to create hotkeys/global shortcuts, aka shortcuts that work everywhere, independent of the application state. This means your application can be active, inactive, minimized or not visible at all and still receive the shortcuts.</p>
<h2>Features</h2>
<ul>
<li>Works on Windows, Mac and X11</li>
<li>Easy to use, can use <code><a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtgui/qtgui.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qkeysequence.html">QKeySequence</a></code> for easy shortcut input</li>
<li>Supports almost all common keys (Depends on OS &amp; Keyboard-Layout)</li>
<li>Allows direct input of Key/Modifier-Combinations</li>
<li>Supports multiple QHotkey-instances for the same shortcut (with optimisations)</li>
<li>Thread-Safe - Can be used on all threads (See section Thread safety)</li>
<li>Allows usage of native keycodes and modifiers, if needed</li>
</ul>
<p><b>Note:</b> For now Wayland is not supported, as it is simply not possible to register a global shortcut with wayland. For more details, or possible Ideas on how to get Hotkeys working on wayland, see <a href="https://github.com/Skycoder42/QHotkey/issues/14">Issue #14</a>.</p>
<h2>Installation</h2>
<p>The package is providet as qpm package, <a href="https://www.qpm.io/packages/de.skycoder42.qhotkey/index.html"><code>de.skycoder42.qhotkey</code></a>. You can install it either via qpmx (preferred) or directly via qpm.</p>
<h3>Via qpmx</h3>
<p><a href="https://github.com/Skycoder42/qpmx">qpmx</a> is a frontend for qpm (and other tools) with additional features, and is the preferred way to install packages. To use it:</p>
<ol type="1">
<li>Install qpmx (See <a href="https://github.com/Skycoder42/qpmx#installation">GitHub - Installation</a>)</li>
<li>Install qpm (See <a href="https://github.com/Cutehacks/qpm/blob/master/README.md#installing">GitHub - Installing</a>, for <b>windows</b> see below)</li>
<li>In your projects root directory, run <code>qpmx install de.skycoder42.qhotkey</code></li>
</ol>
<h3>Via qpm</h3>
<ol type="1">
<li>Install qpm (See <a href="https://github.com/Cutehacks/qpm/blob/master/README.md#installing">GitHub - Installing</a>, for <b>windows</b> see below)</li>
<li>In your projects root directory, run <code>qpm install de.skycoder42.qhotkey</code></li>
<li>Include qpm to your project by adding <code>include(vendor/vendor.pri)</code> to your <code>.pro</code> file</li>
</ol>
<p>Check their <a href="https://github.com/Cutehacks/qpm/blob/master/README.md#usage-for-app-developers">GitHub - Usage for App Developers</a> to learn more about qpm.</p>
<p><b>Important for Windows users:</b> QPM Version <em>0.10.0</em> (the one you can download on the website) is currently broken on windows! It's already fixed in master, but not released yet. Until a newer versions gets released, you can download the latest dev build from here:</p><ul>
<li><a href="https://storage.googleapis.com/www.qpm.io/download/latest/windows_amd64/qpm.exe">https://storage.googleapis.com/www.qpm.io/download/latest/windows_amd64/qpm.exe</a></li>
<li><a href="https://storage.googleapis.com/www.qpm.io/download/latest/windows_386/qpm.exe">https://storage.googleapis.com/www.qpm.io/download/latest/windows_386/qpm.exe</a></li>
</ul>
<h2>Usage</h2>
<p>The general usage is to create <a class="el" href="class_q_hotkey.html" title="A class to define global, systemwide Hotkeys. ">QHotkey</a> instances for specific hotkeys, register them and then simply connect to the signal emitted once the hotkey is pressed.</p>
<h3>Example</h3>
<p>The following example shows a simple application that will run without a window in the background until you press the key-combination <code>Ctrl</code>+<code>Alt</code>+<code>Q</code> (<code>⌘</code>+<code>⌥</code>+<code>Q</code> on Mac). This will quit the application. The debug output will tell if the hotkey was successfully registered and that it was pressed. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;QHotkey&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;QApplication&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;QDebug&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div><div class="line">{</div><div class="line">    <a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtwidgets/qtwidgets.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qapplication.html">QApplication</a> a(argc, argv);</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> hotkey = <span class="keyword">new</span> <a class="code" href="class_q_hotkey.html">QHotkey</a>(<a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtgui/qtgui.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qkeysequence.html">QKeySequence</a>(<span class="stringliteral">&quot;ctrl+alt+Q&quot;</span>), <span class="keyword">true</span>, &amp;a);<span class="comment">//The hotkey will be automatically registered</span></div><div class="line">    qDebug() &lt;&lt; <span class="stringliteral">&quot;Is Registered: &quot;</span> &lt;&lt; hotkey-&gt;isRegistered();</div><div class="line"></div><div class="line">    <a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qobject.html#connect">QObject::connect</a>(hotkey, &amp;<a class="code" href="class_q_hotkey.html#aa790febfca0386588258448558f1b711">QHotkey::activated</a>, qApp, [&amp;](){</div><div class="line">        qDebug() &lt;&lt; <span class="stringliteral">&quot;Hotkey Activated - the application will quit now&quot;</span>;</div><div class="line">        qApp-&gt;quit();</div><div class="line">    });</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> a.exec();</div><div class="line">}</div></div><!-- fragment --><p><b>Note:</b> You need the .pri include for this to work.</p>
<h3>Testing</h3>
<p>By running the example in <code>./HotkeyTest</code> you can test out the <a class="el" href="class_q_hotkey.html" title="A class to define global, systemwide Hotkeys. ">QHotkey</a> class. There are 4 sections:</p><ul>
<li><b>Playground:</b> You can enter some sequences here and try it out with different key combinations.</li>
<li><b>Testings:</b> A list of selected hotkeys. Activate it and try out which ones work for you (<em>Hint:</em> Depending on OS and keyboard layout, it's very possible that a few don't work).</li>
<li><b>Threading:</b> Activate the checkbox to move 2 Hotkeys of the playground to seperate threads. It should work without a difference.</li>
<li><b>Native Shortcut</b>: Allows you to try out the direct usage of native shortcuts</li>
</ul>
<h3>Logging</h3>
<p>By default, <a class="el" href="class_q_hotkey.html" title="A class to define global, systemwide Hotkeys. ">QHotkey</a> prints some warning messages if something goes wrong (For example, a key that cannot be translated). All messages of <a class="el" href="class_q_hotkey.html" title="A class to define global, systemwide Hotkeys. ">QHotkey</a> are grouped into the <a href="https://doc.qt.io/qt-5/qloggingcategory.html">QLoggingCategory</a> <code>"QHotkey"</code>. If you want to simply disable the logging, call the folling function somewhere in your code: </p><div class="fragment"><div class="line"><a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qloggingcategory.html#setFilterRules">QLoggingCategory::setFilterRules</a>(QStringLiteral(<span class="stringliteral">&quot;QHotkey.warning=false&quot;</span>));</div></div><!-- fragment --><p> This will turn all warnings of <a class="el" href="class_q_hotkey.html" title="A class to define global, systemwide Hotkeys. ">QHotkey</a> of (It only uses warnings for now, thats why this is enough). For more information about all the things you can do with the logging categories, check the Qt-Documentation</p>
<h2>Thread saftey</h2>
<p>The <a class="el" href="class_q_hotkey.html" title="A class to define global, systemwide Hotkeys. ">QHotkey</a> class itself is reentrant - wich means you can create as many instances as required on any thread. This allows you to use the <a class="el" href="class_q_hotkey.html" title="A class to define global, systemwide Hotkeys. ">QHotkey</a> on all threads. <b>But</b> you should never use the <a class="el" href="class_q_hotkey.html" title="A class to define global, systemwide Hotkeys. ">QHotkey</a> instance on a thread that is different from the one the instance belongs to! Internally the system uses a singleton instance that handles the hotkey events and distributes them to the <a class="el" href="class_q_hotkey.html" title="A class to define global, systemwide Hotkeys. ">QHotkey</a> instances. This internal class is completley threadsafe.</p>
<p>However, this singleton instance only runs on the main thread. (One reason is that some of the OS-Functions are not thread safe). To make threaded hotkeys possible, the critical functions (registering/unregistering hotkeys and keytranslation) are all run on the mainthread too. The <a class="el" href="class_q_hotkey.html" title="A class to define global, systemwide Hotkeys. ">QHotkey</a> instances on other threads use <code><a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qmetaobject.html#invokeMethod">QMetaObject::invokeMethod</a></code> with a <code>Qt::BlockingQueuedConnection</code>.</p>
<p>For you this means: <a class="el" href="class_q_hotkey.html" title="A class to define global, systemwide Hotkeys. ">QHotkey</a> instances on other threads than the main thread may take a little longer to register/unregister/translate hotkeys, because they have to wait for the main thread to do this for them. <b>Important:</b> there is however, one additional limitation that comes with that feature: <a class="el" href="class_q_hotkey.html" title="A class to define global, systemwide Hotkeys. ">QHotkey</a> instances on other threads but the main thread <em>must</em> be unregistered or destroyed <em>before</em> the main eventloop ends. Otherwise, your application will hangup on destruction of the hotkey. This limitation does not apply for instances on the main thread. Furthermore, the same happens if you change the shortcut or register/unregister before the loop started, until it actually starts.</p>
<h2>Documentation</h2>
<p>The documentation is available as release and on <a href="https://skycoder42.github.io/QHotkey/">github pages</a>.</p>
<p>The documentation was created using <a href="http://www.doxygen.org">doxygen</a>. It includes an HTML-documentation and Qt-Help files that can be included into QtCreator (QtAssistant) to show F1-Help (See <a href="https://doc.qt.io/qtcreator/creator-help.html#adding-external-documentation">Adding External Documentation</a> for more details).</p>
<h2>Technical</h2>
<h3>Requirements</h3>
<ul>
<li>Explicit support is only given down to the latest <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qt.html">Qt</a> LTS, but may work with earlier versions, too</li>
<li>At least the QtGui-Module (a <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtgui/qtgui.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qguiapplication.html">QGuiApplication</a>). Hotkeys on console based applications are not supported (By the operating systems). You can however create a gui application without any visible window.</li>
<li>C++11</li>
</ul>
<h3>Known Limitations</h3>
<ul>
<li>Only single key/modifier combinations are possible. If using <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtgui/qtgui.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qkeysequence.html">QKeySequence</a>, only the first key+modifier of the sequence will be used.</li>
<li>Qt::Key makes no difference between normal numbers and the Numpad numbers. Most keyboards however require this. Thus, you can't register shortcuts for the numpad, unless you use a native shortcut.</li>
<li>Supports not all keys, but most of the common ones. There are differences between platforms and it depends on the Keyboard-Layout. "Delete", for example, works on windows and mac, but not on X11 (At least on my test machines). I tried to use OS-Functions where possible, but since the Qt::Key values need to be converted into native keys, there are some limitations. I can use need such a key, try using the native shortcut.</li>
<li>The registered keys will be "taken" by <a class="el" href="class_q_hotkey.html" title="A class to define global, systemwide Hotkeys. ">QHotkey</a>. This means after a hotkey was cosumend by your application, it will not be sent to the active application. This is done this way by the operating systems and cannot be changed.</li>
</ul>
<p>If you get a <code><a class="el" href="class_q_hotkey.html" title="A class to define global, systemwide Hotkeys. ">QHotkey</a>: Failed to register hotkey. Error: BadAccess (attempt to access private resource denied)</code> error on X11, this means you are trying to register a hotkey that is private to X11. Those keys simply cannot be registered using the normal API </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Mar 11 2018 00:05:42 for QHotkey by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
